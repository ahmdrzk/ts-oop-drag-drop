(()=>{"use strict";class e{constructor(e,t){this.containerElement=document.querySelector(e),this.templateElement=document.querySelector(t),this.templateContentElement=document.importNode(this.templateElement.content,!0).firstElementChild,this.attachToDom()}attachToDom(){this.containerElement.append(this.templateContentElement)}}function t(e){let t=!0;return"string"==typeof e.value&&(e.required&&0===e.value.trim().length&&(t=!1),e.maxLength&&e.value.trim().length>e.maxLength&&(t=!1),e.minLength&&e.value.trim().length<e.minLength&&(t=!1)),"number"==typeof e.value&&(e.required&&0===e.value&&(t=!1),e.max&&e.value>e.max&&(t=!1),e.min&&e.value<e.min&&(t=!1)),t}function n(e,t,n){const r=n.value;return{configurable:!0,enumerable:!1,get(){return r.bind(this)}}}var r;!function(e){e.Active="active",e.Finished="finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.numOfPeople=r,this.status=s}}class i extends class{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new i),this.instance}addProject(e,t,n){const i=new s(`${Math.ceil(10*Math.random())}${Date.now()}`,e,t,n,r.Active);this.projects.push(i),this.callListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&t!==n.status&&(n.status=t),this.callListeners()}callListeners(){this.listeners.forEach((e=>e([...this.projects])))}}const l=i.getInstance();class a extends e{constructor(){super("#app","#form-temp"),this.titleInputElement=this.templateContentElement.querySelector("#title"),this.descriptionInputElement=this.templateContentElement.querySelector("#description"),this.peopleInputElement=this.templateContentElement.querySelector("#people"),this.configure()}configure(){this.templateContentElement.addEventListener("submit",this.submitUserInput)}storeAndValidateUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=+this.peopleInputElement.value;if(t({value:e,required:!0,minLength:5,maxLength:20})&&t({value:n,required:!0,minLength:5,maxLength:50})&&t({value:r,required:!0,min:1,max:5}))return[e,n,r];alert("Invalid inputs, please try again.")}clearUserInput(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitUserInput(e){e.preventDefault();const t=this.storeAndValidateUserInput();if(t){const[e,n,r]=t;l.addProject(e,n,r),this.clearUserInput()}}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],a.prototype,"submitUserInput",null);class o extends e{constructor(e,t){super(e,"#project-item-temp"),this.project=t,this.configure(),this.renderContent()}get persons(){const e=this.project.numOfPeople;return`${e} person${e>1?"s":""}`}configure(){this.templateContentElement.addEventListener("dragstart",this.dragStartHandler)}renderContent(){this.templateContentElement.querySelector("h2").textContent=this.project.title,this.templateContentElement.querySelector("h3").textContent=this.persons+" assigned",this.templateContentElement.querySelector("p").textContent=this.project.description}dragStartHandler(e){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",this.project.id)}dragEndHandler(e){}}!function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);i>3&&l&&Object.defineProperty(t,n,l)}([n],o.prototype,"dragStartHandler",null);var c=function(e,t,n,r){var s,i=arguments.length,l=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(l=(i<3?s(l):i>3?s(t,n,l):s(t,n))||l);return i>3&&l&&Object.defineProperty(t,n,l),l};class p extends e{constructor(e){super("#app","#projects-list-temp"),this.items=[],this.type=e,this.listElement=this.templateContentElement.querySelector("ul"),this.configure(),this.renderContent()}configure(){this.templateContentElement.id=`${this.type}-projects`,this.listElement.id=`${this.type}-projects-list`,l.addListener((e=>{this.items=e.filter((e=>e.status===this.type)),this.renderProjectsList()})),this.templateContentElement.addEventListener("dragover",this.dragOverHandler),this.templateContentElement.addEventListener("dragleave",this.dragLeaveHandler),this.templateContentElement.addEventListener("drop",this.dropHandler)}renderContent(){this.templateContentElement.querySelector("h2").textContent=`${this.type.toUpperCase()} PROJECTS`}renderProjectsList(){this.listElement.innerHTML="",this.items.forEach((e=>{new o(`#${this.listElement.id}`,e)}))}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.listElement.classList.add("droppable"))}dragLeaveHandler(e){this.listElement.classList.remove("droppable")}dropHandler(e){e.stopPropagation();const t=e.dataTransfer.getData("text/plain");l.moveProject(t,"active"===this.type?r.Active:r.Finished)}}c([n],p.prototype,"dragOverHandler",null),c([n],p.prototype,"dragLeaveHandler",null),c([n],p.prototype,"dropHandler",null),new a,new p(r.Active),new p(r.Finished)})();